<view class="container">
  <view class="map-wrapper">
    <view class="map-container">
      <map
        class="map"
        longitude="{{center.lng}}"
        latitude="{{center.lat}}"
        scale="{{scale}}"
        markers="{{markers}}"
        show-location="true"
        include-points="{{includePoints}}"
        enable-zoom="true"
        enable-scroll="true"
        enable-rotate="true"
        bindmarkertap="onMarkerTap"
      />
      <view class="location-btn" bindtap="getUserLocation">
        <text class="location-icon">ğŸ“</text>
      </view>
    </view>
  </view>
  <view class="stats">
    <view class="stats-title">ğŸ“ åŒå­¦åˆ†å¸ƒ</view>
    <view class="stats-summary">
      <text class="summary-text">å…± {{list.length}} ä½åŒå­¦</text>
    </view>
    <view class="stats-list">
      <block wx:for="{{cityStats}}" wx:key="key">
        <view class="stats-item">
          <text class="stats-city">{{item.country}} Â· {{item.city}}</text>
          <text class="stats-count">{{item.count}}äºº</text>
        </view>
      </block>
    </view>
  </view>
  <view class="mask" wx:if="{{selectedCity}}" bindtap="closePopup"></view>
  <view class="popup" wx:if="{{selectedCity}}">
    <view class="popup-header">
      <text class="popup-title">{{selectedCity.country}} Â· {{selectedCity.city}}</text>
      <text class="popup-close" bindtap="closePopup">Ã—</text>
    </view>
    <view class="popup-body">
      <view class="popup-count">å…± {{selectedCity.count}} ä½åŒå­¦</view>
      <view class="popup-names">
        <view class="name-tag" wx:for="{{selectedCity.names}}" wx:key="index">{{item}}</view>
      </view>
    </view>
  </view>
</view>
